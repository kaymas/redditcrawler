{"version":3,"sources":["redditapi.js","index.js"],"names":["search","searchTerm","searchLimit","sortBy","fetch","then","res","json","data","children","map","catch","err","console","error","searchForm","document","getElementById","searchInput","addEventListener","e","value","querySelector","showMessage","results","output","forEach","post","image","preview","images","source","url","permalink","title","truncateText","selftext","subreddit","score","innerHTML","preventDefault","message","className","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","remove","text","limit","shortened","indexOf","substring"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBDnEc;AACXrD,YAAQ,UAASC,UAAT,EAAqBC,WAArB,EAAkCC,MAAlC,EAA0C;AAC9C,eAAOC,MAAO,uCAAsCH,UAAW,SAAQE,MAAO,UAASD,WAAY,EAA5F,EACFG,IADE,CACGC,OAAOA,IAAIC,IAAJ,EADV,EAEFF,IAFE,CAEGG,QAAQA,KAAKA,IAAL,CAAUC,QAAV,CAAmBC,GAAnB,CAAuBF,QAAQA,KAAKA,IAApC,CAFX,EAGFG,KAHE,CAGIC,OAAOC,QAAQC,KAAR,CAAcF,GAAd,CAHX,CAAP;AAIH;AANU","file":"redditfinder.map","sourcesContent":["export default {\n    search: function(searchTerm, searchLimit, sortBy) {\n        return fetch(`http://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`)\n            .then(res => res.json())\n            .then(data => data.data.children.map(data => data.data))\n            .catch(err => console.error(err))\n    }\n};","import reddit from './redditapi'\n\nconst searchForm = document.getElementById('search-form')\nconst searchInput = document.getElementById('search-input')\n\nsearchForm.addEventListener('submit', e => {\n    const searchTerm = searchInput.value;\n    const sortBy = document.querySelector('input[name=\"sortby\"]:checked').value\n    const searchLimit = document.getElementById('limit').value\n    \n    //validate\n    if(searchTerm === ''){\n        showMessage('Please enter a search term', 'alert-danger')\n    }\n    //clear input\n    searchInput.value = ''\n\n    //search reddit\n    reddit.search(searchTerm, searchLimit, sortBy)\n        .then(results => {\n            let output = '<div class=\"card-columns\">'\n            \n            results.forEach(post => {\n                let image = post.preview ? post.preview.images[0].source.url : 'https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg'\n                let permalink = 'https://www.reddit.com/' + post.permalink\n                output += `\n                <div class=\"card\"> \n                    <img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\">\n                    <div class=\"card-body\">\n                        <h5 class=\"card-title\">${post.title}</h5>\n                        <p class=\"card-text\">${truncateText(post.selftext, 100)}</p>\n                        <a href=\"${post.url}\" target=\"_blank\" class=\"btn btn-primary\">Read more</a>\n                        <hr>\n                        <span class=\"badge badge-secondary\">Subreddit : ${post.subreddit}</span>\n                        <span class=\"badge badge-secondary\"><a href=\"${permalink}\" style=\"color: white\"target=\"_blank\">COMMENTS</a></span>\n                        <span class=\"badge badge-dark\">Score : ${post.score}</span>\n                    </div>\n                </div>        \n                `\n                \n            })\n            output += '</div>'\n            document.getElementById('results').innerHTML = output\n\n        })\n\n    e.preventDefault()\n})\n\nfunction showMessage(message, className){\n    const div = document.createElement('div')\n    div.className = `alert ${className}`\n    div.appendChild(document.createTextNode(message))\n\n    //get parent and sibiling\n    const searchContainer = document.getElementById('search-container')\n    const search = document.getElementById('search')\n\n    searchContainer.insertBefore(div, search)\n\n    setTimeout(() => document.querySelector('.alert').remove(), 3000)\n}\n\nfunction truncateText(text, limit){\n    const shortened = text.indexOf(' ', limit)\n    if(shortened == -1) return text\n    return text.substring(0,shortened)\n}"]}